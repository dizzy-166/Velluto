{% load static %}

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Добро пожаловать!</title>
    <link rel="stylesheet" href="{% static 'main/css/styles.css' %}">
</head>
<body>
    <div class="container">
        <h1>Добро пожаловать!</h1>
        <form id="loginForm">
            <div class="input-group">
                <label for="login">Логин</label>
                <input type="text" id="login" placeholder="Введите логин">
                <span class="error-message">Поле обязательно для заполнения</span>
            </div>
            <div class="input-group">
                <label for="password">Пароль</label>
                <input type="password" id="password" placeholder="Введите пароль">
                <span class="error-message">Поле обязательно для заполнения</span>
            </div>
            <button type="submit" class="login-btn" id="loginBtn" disabled>Войти</button>
        </form>
        <div class="register-link">
    <a href="{% url 'reg' %}">Вы еще не наш клиент? Станьте им!</a>
</div>
    </div>

    <script>
       const loginForm = document.getElementById('loginForm');
const loginInput = document.getElementById('login');
const passwordInput = document.getElementById('password');
const loginBtn = document.getElementById('loginBtn');
const errorMessages = document.querySelectorAll('.error-message');

function validateFields() {
    let isValid = true;

    if (loginInput.value.trim() === '') {
        loginInput.classList.add('invalid');
        errorMessages[0].style.display = 'block';
        isValid = false;
    } else {
        loginInput.classList.remove('invalid');
        errorMessages[0].style.display = 'none';
    }

    if (passwordInput.value.trim() === '') {
        passwordInput.classList.add('invalid');
        errorMessages[1].style.display = 'block';
        isValid = false;
    } else {
        passwordInput.classList.remove('invalid');
        errorMessages[1].style.display = 'none';
    }

    loginBtn.disabled = !isValid;
    return isValid;
}

[loginInput, passwordInput].forEach(field => {
    field.addEventListener('input', validateFields);
    field.addEventListener('blur', validateFields);
});

loginForm.addEventListener('submit', function(e) {
    if (!validateFields()) {
        e.preventDefault();
    } else {
        e.preventDefault(); // Добавьте эту строку
        // Здесь может быть AJAX-запрос для авторизации
        window.location.href = 'main.html'; // Принудительный переход
    }
});
    </script>
</body>
</html>